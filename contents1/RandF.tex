% 随机变量 概率分布函数

\pentry{定积分\upref{IntDef}}

生活中有许多现象可以看做是随机的， 例如掷骰子的点数． 事实上骰子作为一个宏观物体， 其运动可以用一个复杂的动力学方程来精确描述． 但由于这个方程及其复杂且对初始条件极为敏感， 使结果难以预测， 我们就有充分的理由将其看作是随机的． 我们可以用一个变量来表示掷骰子的数值结果， 并将其称为\bb{随机变量}．

随机变量可以是\bb{离散}的也可以是连续的， 例如掷骰子的点数只能取 1 到 6 的离散值， 而打靶时子弹离靶心的距离就可以用一个连续的随机变量表示． 对于一些离散的随机变量， 如果我们大量重复结果， 有可能发现每个离散值得到的概率都是恒定的， 例如对一个公平的骰子， 所有的点数得到的概率都是 $1/6$， 对一个公平的硬币， 掷到正反两面的概率都是 $1/2$． 对于连续的随机变量， 得到不同值的概率也会各不相同， 然而这些值有无穷多个， 应该如何描述他们对应的概率呢？

\subsection{连续随机变量的分布函数}
我们可以用\bb{概率分布函数（probability distribution function， PDF）}来描述一个变量取各个值的概率． 假设一个连续随机变量 $x$ 可以在某个区间内取值， 我们就把该区间分为 $n$ 份， 第 $i$ 个子区间的长度为 $\Delta x_i$ 然后我们做大量的实验（记为 $N$ 次）， 把随机变量得到的每个值分类归入这 $n$ 个子区间中， 并把第 $i$ 个区间中值的个数记为 $N_i$． 现在我们可以画出一种表示概率的直方图， 令第 $i$ 个区间的长方形高度为 $y_i = N_i/(N \Delta x_i)$， 则每个长方形的面积 $y_i \Delta x_i = N_i/N$ 表示随机变量的值落在第 $i$ 个区间的概率， 注意所有长方形的面积之和为 1．

% 此处应有图， 左图是 N 为有限值， 右图是 PDF

现在， 我们令区间数 $n\to \infty$ 且每个区间长度 $\Delta x_i \to 0$， 则离散的 $y_i$ 值就可以表示为函数 $y = f(x)$． 我们可以用定积分来表示“所有长方形的面积之和为 1” ， 即\footnote{注意积分上下限是 $x$ 取值的区间， 以下为了方便取整个实数域．}
\begin{equation}
\int_{-\infty}^{+\infty} f(x) = 1
\end{equation}
该式叫做概率分布函数的\bb{归一化}．

若我们要求随机变量落在区间 $[a,b]$ 内的概率， 就求 $[a,b]$ 区间内分布函数下方的面积即可． 更常见地， 我们可以用微分式
\begin{equation}
\dd{P} = f(x) \dd{x}
\end{equation}
表示 $x$ 处长度为 $\dd{x}$ 的区间微元对应的概率 $\dd{P}$． 所以 $f(x)$ 又被称为\bb{概率密度}．

要求某个分布的平均值，我们同样可以将整个区间划分为 $n$ 个子区间，如果每个子区间的长度很小，可以认为该区间中的 $N_i$ 个值都取区间内的某个值 $x_i$， 则平均值可以记为
\begin{equation}
\ev{x} \approx \frac1N \sum_i^n N_i x_i \approx \sum_i^n x_i f(x_i)\Delta x_i
\end{equation}
用定积分的思想， 当子区间无限多且取无限小时， 上式变为
\begin{equation}
\ev{x} = \int_{-\infty}^{+\infty} x f(x) \dd{x}
\end{equation}
类似地， 一个连续分布的\bb{方差}（每个数据点离平均值距离的平方的平均值）可定义为
\begin{equation}
\ev{x^2} = \int_{-\infty}^{+\infty} \qty(x-\ev{x})^2 f(x) \dd{x}
\end{equation}
更一般地， 要求任何量 $Q(x)$ 的平均值， 都可以用
\begin{equation}
\ev{Q} = \int_{-\infty}^{+\infty} Q(x) f(x) \dd{x}
\end{equation}